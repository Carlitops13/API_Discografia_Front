<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taylor's Discography - The Eras Collection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@300;400;600;700&display=swap');
        
        * { font-family: 'Poppins', sans-serif; }
        
        h1 { 
            font-family: 'Playfair Display', serif; 
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: drop-shadow(0 0 10px rgba(168, 85, 247, 0.4)); }
            50% { filter: drop-shadow(0 0 25px rgba(236, 72, 153, 0.6)); }
        }

        /* Fondo dinÃ¡mico */
        .gradient-bg {
            background: linear-gradient(135deg, #fce7f3 0%, #f3e8ff 50%, #dbeafe 100%);
            transition: background 0.5s ease;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #1a0033 0%, #0f0720 50%, #05162a 100%) !important;
            color: white;
        }

        /* Carrusel Infinito */
        .carousel-container { overflow: hidden; position: relative; }
        .carousel-track {
            display: flex;
            animation: scroll 45s linear infinite;
            gap: 2rem;
            padding: 2rem 0;
        }

        .carousel-track.paused { animation-play-state: paused; }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(calc(-100% - 2rem)); }
        }

        /* EstÃ©tica de las Tarjetas */
        .carousel-item {
            flex: 0 0 300px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .carousel-item-inner {
            background: white;
            border-radius: 24px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            height: 100%;
            display: flex;
            flex-direction: column;
            border: 1px solid rgba(255,255,255,0.2);
        }

        body.dark-mode .carousel-item-inner {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
        }

        /* Estilos Responsive */
        @media (max-width: 768px) {
            .carousel-item { flex: 0 0 240px; }
            h1 { font-size: 2.5rem !important; }
        }

        /* Toggle Switch */
        .toggle-switch {
            width: 50px;
            height: 26px;
            background-color: #ccc;
            border-radius: 50px;
            position: relative;
            transition: 0.3s;
        }
        .toggle-switch.active { background-color: #a855f7; }
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            top: 3px;
            left: 3px;
            transition: 0.3s;
        }
        .toggle-switch.active::after { left: 27px; }
    </style>
</head>
<body class="gradient-bg min-h-screen transition-colors duration-500">

    <div class="fixed top-6 right-6 z-50 flex items-center gap-3 bg-white/80 dark:bg-black/40 backdrop-blur-md p-2 px-4 rounded-full shadow-lg cursor-pointer" onclick="toggleDarkMode()">
        <span id="themeIcon" class="text-xl">ðŸŒ™</span>
        <div class="toggle-switch" id="themeSwitch"></div>
    </div>

    <header class="pt-20 pb-10 text-center px-4">
        <h1 class="text-5xl md:text-7xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-600 via-pink-500 to-blue-500 mb-6">
            The Eras Collection
        </h1>
        <p class="text-gray-600 dark:text-gray-400 text-lg max-w-2xl mx-auto font-light">
            Una experiencia visual a travÃ©s de la discografÃ­a de Taylor Swift. 
            <span class="block mt-2 text-sm italic opacity-75 uppercase tracking-widest">Desliza para explorar</span>
        </p>
    </header>

    <main class="carousel-container py-10" id="carouselContainer">
        <div class="carousel-track" id="carouselTrack">
            <th:block th:each="album : ${listaAlbumes}">
                <div class="carousel-item group">
                    <div class="carousel-item-inner relative border-b-8 transition-all duration-300 group-hover:shadow-[0_0_30px_rgba(168,85,247,0.3)]"
                         th:style="'border-color: ' + @{${
                            #strings.contains(album.nombre, 'Reputation') ? '#3d3d3d' : 
                            #strings.contains(album.nombre, 'Lover') ? '#f7b1d4' : 
                            #strings.contains(album.nombre, '1989') ? '#93c5fd' : 
                            #strings.contains(album.nombre, 'Fearless') ? '#fbbf24' : 
                            #strings.contains(album.nombre, 'Red') ? '#b91c1c' : 
                            #strings.contains(album.nombre, 'Speak Now') ? '#a855f7' : 
                            #strings.contains(album.nombre, 'folklore') ? '#9ca3af' : 
                            #strings.contains(album.nombre, 'evermore') ? '#78350f' : 
                            #strings.contains(album.nombre, 'Midnights') ? '#1e3a8a' : '#a855f7'
                         }}">
                        
                        <div class="relative overflow-hidden aspect-square">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity z-10"></div>
                            <img th:src="${album.imagenUrl}" 
                                 th:alt="${album.nombre}"
                                 class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                            
                            <div class="absolute top-4 left-4 z-20">
                                <span class="bg-white/20 backdrop-blur-md text-white text-[10px] px-3 py-1 rounded-full uppercase tracking-widest border border-white/30">
                                    [[${album.genero}]]
                                </span>
                            </div>
                        </div>

                        <div class="p-6 flex flex-col justify-between flex-grow bg-white dark:bg-transparent">
                            <div>
                                <h3 class="text-xl font-bold text-gray-800 dark:text-white leading-tight mb-2 group-hover:text-purple-500 transition-colors" 
                                    th:text="${album.nombre}">Nombre</h3>
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">
                                    Released in [[${#strings.substring(album.fechaLanzamiento, 0, 4)}]]
                                </p>
                            </div>
                            
                            <div class="mt-6 flex items-center justify-between">
                                <span class="text-[10px] font-bold text-purple-600 dark:text-purple-400 tracking-tighter uppercase">Taylor Swift</span>
                                <div class="h-1 w-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </th:block>
        </div>
    </main>

    <footer class="text-center py-12 mt-10 opacity-60">
        <p class="text-sm tracking-widest uppercase">
            ðŸ’œ Made with love for <span class="font-bold">Carlos Puente</span> | 2026
        </p>
    </footer>

    <script>
        // LÃ³gica de Modo Oscuro
        const toggleDarkMode = () => {
            const body = document.body;
            const isDark = body.classList.toggle('dark-mode');
            document.getElementById('themeSwitch').classList.toggle('active');
            document.getElementById('themeIcon').textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
            localStorage.setItem('darkMode', isDark);
        };

        // Cargar preferencia
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.getElementById('themeSwitch').classList.add('active');
            document.getElementById('themeIcon').textContent = 'â˜€ï¸';
        }

        // Duplicar items para loop infinito fluido
        const track = document.getElementById('carouselTrack');
        const items = Array.from(track.children);
        items.forEach(item => {
            const clone = item.cloneNode(true);
            track.appendChild(clone);
        });

        // Pausar al hover
        const container = document.getElementById('carouselContainer');
        container.addEventListener('mouseenter', () => track.classList.add('paused'));
        container.addEventListener('mouseleave', () => track.classList.remove('paused'));
    </script>
</body>
</html>